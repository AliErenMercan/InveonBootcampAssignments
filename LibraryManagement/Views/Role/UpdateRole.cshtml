@model LibraryManagement.Models.RolePermissionViewModel

@{
    ViewData["Title"] = "Update Role";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Update Role</h2>

    <form asp-action="UpdateRole" method="post">
        <input type="hidden" asp-for="Id" />

        <div class="form-group">
            <label for="RoleName">Role Name</label>
            <input type="text" class="form-control" id="RoleName" name="RoleName" asp-for="RoleName" required />
        </div>

        <div class="form-group mt-3">
            <label for="Description">Description</label>
            <textarea class="form-control" id="Description" name="Description" asp-for="Description" rows="3"></textarea>
        </div>

        <h4 class="mt-4">Permissions</h4>
        <div class="form-check">
            @foreach (var permission in Model.Permissions)
            {
                    <div>
                        <input type="checkbox" class="form-check-input" 
                               id="@permission.PermissionId" 
                               name="Permissions[@Model.Permissions.IndexOf(permission)].IsAssigned" 
                               value="true" 
                               checked="@permission.IsAssigned" />

                        <input type="hidden" 
                               name="Permissions[@Model.Permissions.IndexOf(permission)].PermissionId" 
                               value="@permission.PermissionId" />


                        <input type="hidden" 
                                name="Permissions[@Model.Permissions.IndexOf(permission)].PermissionName" 
                                value="@permission.PermissionName" />


                        <input type="hidden" 
                                name="Permissions[@Model.Permissions.IndexOf(permission)].Description" 
                                value="@permission.Description" />

                        <label class="form-check-label" for="@permission.PermissionId">
                            <strong>@permission.PermissionName</strong>: @permission.Description
                        </label>
                    </div>
            }
        </div>

        <button type="submit" class="btn btn-primary mt-3">Update Role</button>
    </form>

    <a href="@Url.Action("ListRoles", "Role")" class="btn btn-secondary mt-3">Back to Role List</a>
</div>
